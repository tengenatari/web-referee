syntax = "proto3";
package web.referee.service.v1;
option go_package = "github.com/tengenatari/web-referee/internal/pb/web_referee_api;web_referee_api";

import "google/api/annotations.proto";
import "models/models.proto";
service WebRefereeService {
  rpc HealthCheck(HealthCheckRequest) returns (HealthCheckResponse) {
    option (google.api.http) = {
      get: "/api/v1/health-check"
    };
  }
  rpc CreateUser(CreateUserRequest) returns (CreateUserResponse){
    option (google.api.http) = {
      post: "/api/v1/user"
    };
  }
  rpc CreateTournament(CreateTournamentRequest) returns (CreateTournamentResponse) {
    option (google.api.http) = {
      post: "/api/v1/tournament"
    };
  }
  rpc CreatePlayer(CreatePlayerRequest) returns (CreatePlayerResponse) {
    option (google.api.http) = {
      post: "/api/v1/player"
    };
  }
  rpc CreatePairing(CreatePairingRequest) returns (CreatePairingResponse) {
    option (google.api.http) = {
      post: "/api/v1/pairing"
    };
  }
  rpc GetPairing(GetPairingRequest) returns (GetPairingResponse){
    option(google.api.http) = {
      get: "/api/v1/pairing"
    };
  }
}

message HealthCheckResponse {}

message HealthCheckRequest {}

message CreateUserRequest {
  string name = 1;
  string tigr_id = 2;
  int64  rating = 3;
}

message CreateUserResponse {
  string UserUUID = 1;
}

message CreateTournamentResponse {
  string TournamentUUID = 1;
}

message CreateTournamentRequest {
  string name = 1;
  string date = 2;
}

message CreatePlayerRequest {
  string TournamentId = 1;
  string UserId = 2;
  int64 MacMahon = 3;
}

message CreatePlayerResponse {
  string PlayerUUID = 1;
}

message CreatePairingRequest {
  string TournamentId = 1;
}

message CreatePairingResponse {
}

message GetPairingRequest {
  string TournamentId = 1;
}

message GetPairingResponse{
  repeated web.referee.models.v1.Game games = 1;
}

